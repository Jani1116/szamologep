<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Smart Toolbox 2026 Pro</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.js"></script>
    <script defer src="https://unpkg.com/mathlive"></script>
    <style>
        :root {
            --bg: #000; --card: #1c1c1e; --accent: #0a84ff; --text: #fff; 
            --gray: #8e8e93; --border: #38383a;
        }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 10px; }
        .container { max-width: 700px; margin: auto; background: var(--card); border-radius: 20px; padding: 20px; min-height: 94vh; display: flex; flex-direction: column; border: 1px solid var(--border); box-sizing: border-box; position: relative; }
        .hidden { display: none !important; }
        
        h2 { text-align: center; margin-bottom: 20px; }

        /* GOMBOK */
        .calc-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
        .btn-3d { background: #333; border: none; border-radius: 12px; color: white; font-size: 20px; font-weight: bold; padding: 18px 0; cursor: pointer; }
        .btn-3d:active { background: #444; transform: scale(0.98); }
        .btn-op { color: var(--accent); }
        .btn-eq { background: var(--accent); color: white; }

        .main-btn { background: #2c2c2e; color: white; border: none; padding: 20px; border-radius: 15px; margin: 8px 0; font-size: 18px; cursor: pointer; width: 100%; display: flex; justify-content: space-between; }
        
        /* SZ√ÅMOL√ìG√âP FEJL√âC */
        .calc-header { position: relative; width: 100%; }
        .mode-btn { position: absolute; right: 10px; top: 10px; z-index: 10; background: #3a3a3c; color: var(--accent); border: 1px solid var(--border); padding: 5px 12px; border-radius: 8px; font-weight: bold; font-size: 12px; }
        
        math-field { font-size: 32px; background: #111; border: 1px solid var(--border); border-radius: 12px; color: white; padding: 15px; margin-bottom: 15px; width: 100%; outline: none; }
        math-field::part(virtual-keyboard-toggle), math-field::part(menu-toggle) { display: none; }

        /* INPUTOK */
        input[type="date"], input[type="number"] { background: #2c2c2e; border: 1px solid var(--border); color: white; padding: 15px; border-radius: 12px; font-size: 18px; width: 100%; box-sizing: border-box; margin-bottom: 10px; }
        select { background: #3a3a3c; border: 1px solid var(--accent); color: white; padding: 15px; border-radius: 12px; font-size: 18px; cursor: pointer; }

        .back-btn { background: #333; color: white; border: none; padding: 15px; border-radius: 12px; width: 100%; margin-top: auto; font-weight: 600; }
        .res-box { background: #111; padding: 15px; border-radius: 12px; margin-top: 10px; text-align: center; font-size: 18px; border: 1px dashed var(--gray); }
    </style>
</head>
<body>

<div class="container" id="menu">
    <div style="font-size: 50px; text-align: center; margin: 20px 0;">üõ†Ô∏è</div>
    <h2 style="margin-top:0">Smart Toolbox</h2>
    <button class="main-btn" onclick="nav('calc')">üî¢ Profi Sz√°mol√≥g√©p <span>‚Ä∫</span></button>
    <button class="main-btn" onclick="nav('hossz')">üìè Hosszv√°lt√≥ (HU/UK) <span>‚Ä∫</span></button>
    <button class="main-btn" onclick="nav('egyeb')">üéÇ Sz√ºlet√©snap & Egy√©b <span>‚Ä∫</span></button>
</div>

<div class="container hidden" id="calc">
    <div class="calc-header">
        <button class="mode-btn" onclick="toggleMode()">MODE</button>
        <math-field id="calc-mf" read-only>0</math-field>
    </div>
    <div id="panel-basic" class="calc-grid">
        <button class="btn-3d btn-op" onclick="op('clear')">AC</button>
        <button class="btn-3d btn-op" onclick="op('back')">‚å´</button>
        <button class="btn-3d btn-op" onclick="ins('\\pi')">œÄ</button>
        <button class="btn-3d btn-op" onclick="ins('/')">√∑</button>
        <button class="btn-3d" onclick="ins('7')">7</button>
        <button class="btn-3d" onclick="ins('8')">8</button>
        <button class="btn-3d" onclick="ins('9')">9</button>
        <button class="btn-3d btn-op" onclick="ins('*')">√ó</button>
        <button class="btn-3d" onclick="ins('4')">4</button>
        <button class="btn-3d" onclick="ins('5')">5</button>
        <button class="btn-3d" onclick="ins('6')">6</button>
        <button class="btn-3d btn-op" onclick="ins('-')">-</button>
        <button class="btn-3d" onclick="ins('1')">1</button>
        <button class="btn-3d" onclick="ins('2')">2</button>
        <button class="btn-3d" onclick="ins('3')">3</button>
        <button class="btn-3d btn-op" onclick="ins('+')">+</button>
        <button class="btn-3d btn-op" onclick="ins('^{#?}')">x‚Åø</button>
        <button class="btn-3d" onclick="ins('0')">0</button>
        <button class="btn-3d btn-op" onclick="ins('\\sqrt[#?]{#?}')">‚Åø‚àö</button>
        <button class="btn-3d btn-eq" onclick="calcResult()">=</button>
    </div>
    <div id="panel-pro" class="calc-grid hidden">
        <button class="btn-3d btn-op" onclick="ins('\\sin(#?)')">sin</button>
        <button class="btn-3d btn-op" onclick="ins('\\cos(#?)')">cos</button>
        <button class="btn-3d btn-op" onclick="ins('\\tan(#?)')">tan</button>
        <button class="btn-3d btn-op" onclick="ins('e')">e</button>
        <button class="btn-3d" style="grid-column: span 2" onclick="op('clear')">AC</button>
        <button class="btn-3d btn-eq" style="grid-column: span 2" onclick="calcResult()">=</button>
    </div>
    <button class="back-btn" onclick="nav('menu')">Vissza</button>
</div>

<div class="container hidden" id="hossz">
    <h2>Hossz√∫s√°g</h2>
    <input type="number" id="v1" oninput="convert(1)" placeholder="Metrikus">
    <select id="u1" onchange="convert(1)" style="margin-bottom:20px"><option value="1">m</option><option value="1000">km</option><option value="0.01">cm</option></select>
    <input type="number" id="v3" oninput="convert(3)" placeholder="Angolsz√°sz">
    <select id="u3" onchange="convert(3)"><option value="1609.344">Mile</option><option value="0.0254">Inch</option></select>
    <button class="back-btn" onclick="nav('menu')">Vissza</button>
</div>

<div class="container hidden" id="egyeb">
    <h2>Sz√ºlet√©snap sz√°ml√°l√≥</h2>
    <input type="date" id="bday" onchange="calcBday()">
    <div id="bday-res" class="res-box">V√°lassz d√°tumot!</div>
    <button class="back-btn" onclick="nav('menu')">Vissza</button>
</div>

<script>
    // NAVIG√ÅCI√ì (Vissza gomb kezel√©se)
    window.onload = () => history.replaceState({page: 'menu'}, '');
    window.onpopstate = (e) => { if(e.state) show(e.state.page, false); };

    function nav(id) {
        if(id === 'menu') history.back();
        else { history.pushState({page: id}, ''); show(id, false); }
    }

    function show(id) { 
        document.querySelectorAll('.container').forEach(c => c.classList.add('hidden')); 
        document.getElementById(id).classList.remove('hidden'); 
    }

    function toggleMode() {
        document.getElementById('panel-basic').classList.toggle('hidden');
        document.getElementById('panel-pro').classList.toggle('hidden');
    }

    // LOGIKA
    const mf = document.getElementById('calc-mf');
    function ins(v) { if(mf.value === "0") mf.value = ""; mf.insert(v); }
    function op(t) { t==='clear'?mf.value="0":mf.executeCommand('deleteBackward'); }
    function calcResult() {
        try { mf.value = math.evaluate(mf.getValue("ascii-math")).toString(); } catch(e){ alert("Hiba!"); }
    }

    function calcBday() {
        const d = new Date(document.getElementById('bday').value);
        if(!d.getTime()) return;
        const diff = new Date() - d;
        const days = Math.floor(diff / (1000*60*60*24));
        document.getElementById('bday-res').innerHTML = `<b>${days}</b> napos vagy!`;
    }

    function convert(source) {
        const v1 = document.getElementById('v1'), u1 = document.getElementById('u1');
        const v3 = document.getElementById('v3'), u3 = document.getElementById('u3');
        let m = source === 1 ? v1.value * u1.value : v3.value * u3.value;
        if(source !== 1) v1.value = (m / u1.value).toFixed(2);
        if(source !== 3) v3.value = (m / u3.value).toFixed(2);
    }
</script>
</body>
</html>
